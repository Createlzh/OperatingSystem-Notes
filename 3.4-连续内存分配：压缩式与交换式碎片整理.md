# 3.4 连续内存分配：压缩式与交换式碎片整理

[TOC]

### 压缩式碎片整理

* **定义**：重置程序以合并孔洞

  > 使得应用程序占据的内存紧凑排列，减少内存碎片

* **要求**：所有程序是动态可重置的

* 问题：

  	1. 何时重置：在程序没有执行的时候
   	2. 开销：在内存中频繁操作会导致开销很大，甚至影响系统运行



### 交换式碎片整理

> 当P1，P2，P4这三个应用程序已经将内存占满或所剩空间很小时，需要较大内存空间的P3就无法运行，此时**即使通过压缩式碎片整理也无法腾出空间**

* 某个运行程序需要更多的内存时：

  * 抢占**等待**状态的程序，并回收他们的内存

  * 将他们占用的内存空间暂时挪到硬盘上

    > * 他们的数据并没有丢失，只是暂时从主存上移到了硬盘上
    >
    > * 等运行的程序结束以后，再将数据copy回主存中

* 这一方法的操作**粒度**：单个程序的大小

* 问题：交换哪些程序？

  > 后续讲解